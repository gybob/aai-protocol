{
  "schema_version": "1.0",
  "appId": "com.apple.mail",
  "name": "Mail",
  "description": "Apple's native email client",
  "version": "1.0.0",
  "platforms": {
    "macos": {
      "automation": "applescript",
      "tools": [
        {
          "name": "send_email",
          "description": "Send a new email via Apple Mail",
          "parameters": {
            "type": "object",
            "properties": {
              "to": {
                "type": "string",
                "description": "Recipient email address"
              },
              "subject": {
                "type": "string",
                "description": "Email subject"
              },
              "body": {
                "type": "string",
                "description": "Email body content"
              }
            },
            "required": ["to", "subject", "body"]
          },
          "script": "tell application \"Mail\"\n  set newMessage to make new outgoing message with properties {subject:\"${subject}\", content:\"${body}\", visible:false}\n  tell newMessage\n    make new to recipient at beginning of to recipients with properties {address:\"${to}\"}\n    send\n  end tell\nend tell\nreturn \"{\\\"success\\\": true, \\\"message_id\\\": \\\"generated\\\"}\"",
          "output_parser": "result as text",
          "timeout": 30
        },
        {
          "name": "get_mailboxes",
          "description": "List all mailboxes",
          "parameters": {
            "type": "object",
            "properties": {},
            "required": []
          },
          "script": "tell application \"Mail\"\n  set mailboxNames to name of every mailbox\n  return \"{\\\"mailboxes\\\": \" & my listToJSON(mailboxNames) & \"}\"\nend tell\n\non listToJSON(theList)\n  set jsonStr to \"[\"\n  repeat with i from 1 to count of theList\n    set jsonStr to jsonStr & \"\\\"\" & item i of theList & \"\\\"\"\n    if i < count of theList then set jsonStr to jsonStr & \",\"\n  end repeat\n  return jsonStr & \"]\"\nend listToJSON",
          "output_parser": "result as text",
          "timeout": 10
        }
      ]
    }
  }
}
