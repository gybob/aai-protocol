{
  "schema_version": "1.0",
  "app": {
    "id": "com.notion.api",
    "name": "Notion",
    "description": "Notion workspace - notes, docs, wikis, and project management",
    "version": "1.0.0"
  },
  "execution": {
    "type": "http",
    "base_url": "https://api.notion.com/v1",
    "default_headers": {
      "Content-Type": "application/json",
      "Notion-Version": "2022-06-28"
    }
  },
  "auth": {
    "type": "oauth2",
    "oauth2": {
      "flow": "authorization_code",
      "authorization_endpoint": "https://api.notion.com/v1/oauth/authorize",
      "token_endpoint": "https://api.notion.com/v1/oauth/token",
      "scopes": ["read_content", "write_content"],
      "pkce": {
        "method": "S256"
      }
    }
  },
  "tools": [
    {
      "name": "search",
      "description": "Search pages and databases in Notion workspace",
      "execution": {
        "path": "/search",
        "method": "POST",
        "body_template": {
          "query": "${query}",
          "page_size": "${page_size}"
        }
      },
      "parameters": {
        "type": "object",
        "properties": {
          "query": {
            "type": "string",
            "description": "Search query text"
          },
          "page_size": {
            "type": "integer",
            "minimum": 1,
            "maximum": 100,
            "default": 10,
            "description": "Maximum results to return"
          }
        },
        "required": ["query"]
      },
      "returns": {
        "type": "object",
        "properties": {
          "results": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": { "type": "string" },
                "title": { "type": "string" },
                "type": { "type": "string" }
              }
            }
          }
        }
      }
    },
    {
      "name": "get_page",
      "description": "Retrieve a page by ID",
      "execution": {
        "path": "/pages/${page_id}",
        "method": "GET"
      },
      "parameters": {
        "type": "object",
        "properties": {
          "page_id": {
            "type": "string",
            "description": "Page ID"
          }
        },
        "required": ["page_id"]
      }
    },
    {
      "name": "create_page",
      "description": "Create a new page in a database",
      "execution": {
        "path": "/pages",
        "method": "POST",
        "body_template": {
          "parent": { "database_id": "${database_id}" },
          "properties": {
            "title": {
              "title": [{ "text": { "content": "${title}" } }]
            }
          }
        }
      },
      "parameters": {
        "type": "object",
        "properties": {
          "database_id": {
            "type": "string",
            "description": "Parent database ID"
          },
          "title": {
            "type": "string",
            "description": "Page title"
          }
        },
        "required": ["database_id", "title"]
      },
      "returns": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "url": { "type": "string" }
        }
      }
    },
    {
      "name": "update_page",
      "description": "Update page properties",
      "execution": {
        "path": "/pages/${page_id}",
        "method": "PATCH",
        "body_template": {
          "properties": {
            "title": { "title": [{ "text": { "content": "${title}" } }] }
          },
          "archived": "${archived}"
        }
      },
      "parameters": {
        "type": "object",
        "properties": {
          "page_id": {
            "type": "string",
            "description": "Page ID to update"
          },
          "title": {
            "type": "string",
            "description": "New title"
          },
          "archived": {
            "type": "boolean",
            "description": "Archive the page"
          }
        },
        "required": ["page_id"]
      }
    },
    {
      "name": "query_database",
      "description": "Query a database with filters",
      "execution": {
        "path": "/databases/${database_id}/query",
        "method": "POST",
        "body_template": {
          "filter": "${filter}",
          "sorts": "${sorts}",
          "page_size": "${page_size}"
        }
      },
      "parameters": {
        "type": "object",
        "properties": {
          "database_id": {
            "type": "string",
            "description": "Database ID"
          },
          "filter": {
            "type": "object",
            "description": "Filter conditions"
          },
          "sorts": {
            "type": "array",
            "items": { "type": "object" },
            "description": "Sort rules"
          },
          "page_size": {
            "type": "integer",
            "minimum": 1,
            "maximum": 100,
            "default": 10
          }
        },
        "required": ["database_id"]
      }
    }
  ]
}