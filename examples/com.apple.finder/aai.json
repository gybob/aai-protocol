{
  "schema_version": "1.0",
  "appId": "com.apple.finder",
  "name": "Finder",
  "description": "macOS native file manager",
  "version": "1.0.0",
  "platforms": {
    "macos": {
      "automation": "applescript",
      "tools": [
        {
          "name": "get_selection",
          "description": "Get the currently selected files in Finder",
          "parameters": {
            "type": "object",
            "properties": {},
            "required": []
          },
          "script": "tell application \"Finder\"\n  set selectedItems to selection\n  set itemList to {}\n  repeat with anItem in selectedItems\n    set end of itemList to POSIX path of (anItem as text)\n  end repeat\n  return \"{\\\"files\\\": \" & my listToJSON(itemList) & \"}\"\nend tell\n\non listToJSON(theList)\n  set jsonStr to \"[\"\n  repeat with i from 1 to count of theList\n    set jsonStr to jsonStr & \"\\\"\" & item i of theList & \"\\\"\"\n    if i < count of theList then set jsonStr to jsonStr & \",\"\n  end repeat\n  return jsonStr & \"]\"\nend listToJSON",
          "output_parser": "result as text",
          "timeout": 10
        },
        {
          "name": "open_folder",
          "description": "Open a folder in Finder",
          "parameters": {
            "type": "object",
            "properties": {
              "path": {
                "type": "string",
                "description": "The path to the folder to open"
              }
            },
            "required": ["path"]
          },
          "script": "tell application \"Finder\"\n  activate\n  open POSIX file \"${path}\"\nend tell\nreturn \"{\\\"success\\\": true}\"",
          "output_parser": "result as text",
          "timeout": 5
        },
        {
          "name": "create_folder",
          "description": "Create a new folder",
          "parameters": {
            "type": "object",
            "properties": {
              "path": {
                "type": "string",
                "description": "The full path for the new folder"
              }
            },
            "required": ["path"]
          },
          "script": "do shell script \"mkdir -p \" & quoted form of \"${path}\"\nreturn \"{\\\"success\\\": true, \\\"path\\\": \\\"${path}\\\"}\"",
          "output_parser": "result as text",
          "timeout": 5
        }
      ]
    }
  }
}
